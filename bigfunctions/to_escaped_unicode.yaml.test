with

source as (

  select 'SCHÃœMANN' as text

),


transformed as (

  select
    text,
    to_code_points(text) as code_points,
    array_to_string(array(select if(code_point >= 128, format('\\u%04x', code_point), chr(code_point)) from unnest(to_code_points(text)) as code_point), '') as unicode_escaped_text,
  from source

)


select *
from transformed


